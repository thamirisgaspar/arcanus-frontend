<div class="container text-center">
    <form class="form-group" [formGroup]="signupForm" (ngSubmit)="signupSubmit()" *ngIf="!isLoading">
        <div *ngIf="msgShow" class="alert alert-{{alertType}}" role="alert">
            {{msg}}

            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" (click)="clearMsg()"></button>
        </div>

        <div class="row">
            <div class="col-12">
                <mat-form-field hintLabel="Max 255 characters" appearance="fill">
                    <mat-label>Nome</mat-label>
                    <input matInput #name maxlength="255" placeholder="Alonso" formControlName="name" required>
                    <mat-hint align="end">{{name.value.length}}/255</mat-hint>
                    <mat-error *ngIf="signupForm.controls.name.hasError('required')">
                        Nome é <strong>obrigatório</strong>
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="col-12">
                <mat-form-field hintLabel="Max 300 characters" appearance="fill">
                    <mat-label>Informe seu email</mat-label>
                    <input matInput #username maxlength="300" placeholder="pat@example.com" formControlName="username" required>
                    <mat-hint align="end">{{username.value.length}}/300</mat-hint>
                    <mat-error *ngIf="signupForm.controls.username.hasError('username') && !signupForm.controls.username.hasError('required')">
                        Por favor informe um email válido
                    </mat-error>
                    
                    <mat-error *ngIf="signupForm.controls.username.hasError('required')">
                        Email é <strong>obrigatório</strong>
                    </mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-6 col-sm-12">
                <mat-form-field class="middle" hintLabel="Max 12 characters" appearance="fill">
                    <mat-label>Informe uma senha</mat-label>
                    <input matInput #password maxlength="12" [type]="hide ? 'password' : 'text'" formControlName="password" required>
                    <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                      <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    <mat-hint align="end">{{password.value.length}}/12</mat-hint>
                    <div *ngIf="signupForm.controls.password.invalid && signupForm.controls.password.touched || signupForm.controls.password.dirty">
                        <mat-error *ngIf="signupForm.controls.password.hasError('required')">
                            Senha é <strong>obrigatório</strong>
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.password.hasError('minlength')">
                            A senha deve ter pelo menos 6 caracteres
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.password.hasError('maxlength')">
                            A senha não pode exceder 12 caracteres
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.password.hasError('hasNumber')">
                            A senha deve conter pelo menos 1 número
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.password.hasError('hasCapitalCase')">
                            A senha deve conter pelo menos 1 letra maiúscula
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.password.hasError('hasSmallCase')">
                            A senha deve conter pelo menos 1 letra minúscula
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.password.hasError('hasSpecialCharacters')">
                            A senha deve conter pelo menos 1 caracter especial
                        </mat-error>
                    </div>
                </mat-form-field>
            </div>

            <div class="col-md-6 col-sm-12">
                <mat-form-field class="middle" hintLabel="Max 12 characters">
                    <mat-label>Confirme sua senha</mat-label>
                    <input matInput #passwordC maxlength="12" [type]="hide ? 'password' : 'text'" formControlName="passwordC" required>
                    <button mat-icon-button matSuffix (click)="hideC = !hideC" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideC">
                      <mat-icon>{{hideC ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    <mat-hint align="end">{{passwordC.value.length}}/12</mat-hint>
                    <div *ngIf="signupForm.controls.passwordC.invalid && signupForm.controls.passwordC.touched || signupForm.controls.passwordC.dirty">
                        <mat-error *ngIf="signupForm.controls.passwordC.hasError('required')">
                            Confirmação de senha é <strong>obrigatório</strong>
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.passwordC.hasError('minlength')">
                            A confirmação de senha deve ter pelo menos 6 caracteres
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.passwordC.hasError('maxlength')">
                            A confirmação de senha não pode exceder 12 caracteres
                        </mat-error>

                        <mat-error *ngIf="signupForm.controls.passwordC.hasError('mustMatch')">
                            As senhas são diferentes
                        </mat-error>
                    </div>
                </mat-form-field>
            </div>

            <div class="col-12 text-center">
                <button [disabled]="!signupForm.valid" mat-raised-button class="btn-default" type="submit">Sign Up</button>
            </div>
        </div>
    </form>
</div>